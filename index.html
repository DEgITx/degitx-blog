<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="https://fonts.googleapis.com/css?family=Saira&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Overpass+Mono|Source+Code+Pro&display=swap" rel="stylesheet">

    <title> Alexey Kasyanchuk &mdash; Senior Software Developer </title>
    <meta property="og:title" content=" Alexey Kasyanchuk &mdash; Senior Software Developer " />
    <meta name="twitter:title" content=" Alexey Kasyanchuk &mdash; Senior Software Developer " />

    <meta name="description" content="Alexey Kasyanchuk - Senior Software Engineer with 10 years of expiriece in C/C++, Java, Python. I share expiriece.">
    <meta name="description" property="og:description" content="Alexey Kasyanchuk - Senior Software Engineer with 10 years of expiriece in C/C++, Java, Python. I share expiriece." />
    <meta name="twitter:description" content="Alexey Kasyanchuk - Senior Software Engineer with 10 years of expiriece in C/C++, Java, Python. I share expiriece." />
    <meta name="keywords" content="C, C++, Java, Python, Performance, Android, Java, Git, Github, StackOverflow, algorithm, Qt, DEgITx, Kasyanchuk, Gitlab" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@degitx" />
    
    <meta property="og:url" content="https://blog.degitx.com/" />

    <meta property="og:image" content="" />
    <meta name="twitter:image" content="" />

    <meta name="author" content="Alexey Kasyanchuk" />

    <meta name="copyright" content="Copyright by Alexey Kasyanchuk. All Rights Reserved." />

    <style>
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 300;
            src: local('Roboto Light'), local('Roboto-Light'), url(https://fonts.gstatic.com/s/roboto/v15/Hgo13k-tfSpn0qi1SFdUfVtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 400;
            src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v15/CWB0XYA8bzo0kSThX0UTuA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 700;
            src: local('Roboto Bold'), local('Roboto-Bold'), url(https://fonts.gstatic.com/s/roboto/v15/d-6IYplOFocCacKzxwXSOFtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 900;
            src: local('Roboto Black'), local('Roboto-Black'), url(https://fonts.gstatic.com/s/roboto/v15/mnpfi9pxYH-Go5UiibESIltXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 300;
            src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(https://fonts.gstatic.com/s/roboto/v15/7m8l7TlFO-S3VkhHuR0at44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 400;
            src: local('Roboto Italic'), local('Roboto-Italic'), url(https://fonts.gstatic.com/s/roboto/v15/vPcynSL0qHq_6dX7lKVByfesZW2xOQ-xsNqO47m55DA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 700;
            src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(https://fonts.gstatic.com/s/roboto/v15/t6Nd4cfPRhZP44Q5QAjcC44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 900;
            src: local('Roboto Black Italic'), local('Roboto-BlackItalic'), url(https://fonts.gstatic.com/s/roboto/v15/bmC0pGMXrhphrZJmniIZpY4P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }
    </style>
    
    <link href="/favicon.png" rel="shortcut icon" type="image/x-icon" />
    
    <link rel="stylesheet" href="https://blog.degitx.com/assets/css/main.css">

    <link rel="canonical" href="https://blog.degitx.com/">

    <link rel="alternate" type="application/rss+xml" title="" href="https://blog.degitx.com/feed.xml">

    <script src="https://blog.degitx.com/assets/js/jquery-1.12.2.min.js"></script>
<script src="https://blog.degitx.com/assets/js/backtotop.js"></script>
<script src="https://blog.degitx.com/assets/js/lunr.min.js"></script>
<script src="https://blog.degitx.com/assets/js/lunr-feed.js"></script>
<script src="https://blog.degitx.com/assets/js/jquery.fitvids.js"></script>
<script src="https://blog.degitx.com/assets/js/svg4everybody.min.js"></script>
<script src="https://blog.degitx.com/assets/js/scripts.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NF83F10V5F"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-NF83F10V5F');
    </script>


<script>
const host_address = "https://blog.degitx.com".replace('https://', '');
if (window.location.host == host_address && window.location.protocol == "http:") {
  window.location.protocol = "https:"
}
</script>

</head>

    <body>
        <div class="wrapper">
            <aside class="user-profile fixed" role="complementary">
    <div class="burger">
        <input class="trigger hidden" id="toggleBurger" type="checkbox" />
        <label for="toggleBurger">
            <span>Navigation</span>
        </label>
    </div>

    <div class="compact-header">
        <a class="avatar" href="https://blog.degitx.com"><img alt="Avatar" src="/degitx.jpg" /></a>
        <div class="my-info">
            <strong class="my-name">Alexey Kasyanchuk</strong>
            <span class="my-job-title">Senior Software Developer</span>
        </div>
    </div>

    
        
        <div class="mainmenu">
            <a href="/" class="active">Blog</a>
            
                
            
                
            
                
            
                
                    <a href="https://blog.degitx.com/resume/" >About</a>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        </div>
        
    

    <p class="about-me">Alexey Kasyanchuk - Senior Software Engineer with 10 years of expiriece in C/C++, Java, Python. I share expiriece.</p>

    <ul class="socials">
        <li class="twitter"><a href="http://twitter.com/DEgITx"><svg title="twitter" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li><li class="github"><a href="http://github.com/DEgITx"><svg title="github" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#github-icon"></use></svg></a></li><li class="linkedin"><a href="https://www.linkedin.com/in/alexey-kasyanchuk-60301456/"><svg title="linkedin" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#linkedin-icon"></use></svg></a></li><li class="stack-overflow"><a href="https://stackoverflow.com/users/1315059/degitx"><svg title="stack-overflow" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#stack-overflow-icon"></use></svg></a></li>

        
            <li class="email"><a href="mailto:degitx@gmail.com"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#email-icon"></use></svg></a></li>
        

        
         <li class="rss-feed"><a href="https://blog.degitx.com/feed.xml"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#rss-icon"></use></svg></a></li>
        
    </ul>
</aside>

            <main class="the-content" role="main">
                
                
<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2023-03-03T00:05:00+00:00" itemprop="datePublished">3 Mar, 2023</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/colorful-windows-terminal.html">Display color output with C/C++ in windows terminal (fix escape characters color displaying)</a></h2>
    </header>

    <div class="post-content">
        <p>On windows when you will try to display \033[0m or \x1B[31m and so one, instead of getting color in terminal you will get ]31m. On windows 10 and letter it’s pretty easy to fix. You just need to include next code:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="c">#include &lt;windows.h&gt;</span>

HANDLE hConsole <span class="o">=</span> GetStdHandle<span class="o">(</span>STD_OUTPUT_HANDLE<span class="o">)</span><span class="p">;</span>
<span class="k">if</span> <span class="o">(</span>hConsole<span class="o">)</span>
<span class="o">{</span>
    DWORD consoleMode<span class="p">;</span>
    GetConsoleMode<span class="o">(</span>hConsole, &amp;consoleMode<span class="o">)</span><span class="p">;</span>
    SetConsoleMode<span class="o">(</span>hConsole, consoleMode | ENABLE_VIRTUAL_TERMINAL_PROCESSING<span class="o">)</span><span class="p">;</span>
<span class="o">}</span>

// now you can use color <span class="nb">printf</span><span class="o">()</span>
</pre></td></tr></tbody></table></code></pre></figure>



        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Display color output with C/C++ in windows terminal (fix escape characters color displaying)&p[summary]=On windows when you will try to display \033[0m or \x1B[31m and so one, instead of getting color in terminal you will get ]31m. On window...&p[url]=https://blog.degitx.com/general/colorful-windows-terminal.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/colorful-windows-terminal.html&text=On windows when you will try to display \033[0m or \x1B[31m and so one, instead of getting color in terminal you will get ]31m. On window...&hashtags=C,C++,windows,colors,winapi,text,anscii,escape,chars,\033[0m," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/windows">windows</a></li>
                
                <li><a href="https://blog.degitx.com/tag/colors">colors</a></li>
                
                <li><a href="https://blog.degitx.com/tag/winapi">winapi</a></li>
                
                <li><a href="https://blog.degitx.com/tag/text">text</a></li>
                
                <li><a href="https://blog.degitx.com/tag/anscii">anscii</a></li>
                
                <li><a href="https://blog.degitx.com/tag/escape">escape</a></li>
                
                <li><a href="https://blog.degitx.com/tag/chars">chars</a></li>
                
                <li><a href="https://blog.degitx.com/tag/\033[0m">\033[0m</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2022-11-15T00:05:00+00:00" itemprop="datePublished">15 Nov, 2022</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/amlogic_s805x_board.html">AmLogic s805x GXL SoC board bring up</a></h2>
    </header>

    <div class="post-content">
        <p>One of the previous projects was related to bringing up our newly developed board with the AmLogic s805x SoC CPU board. I will describe how the proccess of bringing up looks like, what was tested and also we will take a look how the AmLogic board flashing proccess is carried out for GXL platform (G12B and more recent are very similar).
This is our board:</p>

<figure>
  <img src="/images/s805x/1.png" />
  <figcaption>Our developed Z8 board with AmLogic s805x SoC</figcaption>
</figure>

<p>The first stage of bringup is to build image for reference board. Our case is p241. We took a113 sources for this. Build p241 reference sources:</p>

<h2 id="build-image">Build image</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="c"># You need arm-linux-gnueabihf-gcc and aarch64-linux-gnu-gcc to be installed in system toolchains</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>zlib1g zlib1g-dev
<span class="nv">$ </span><span class="nb">source </span>buildroot/build/setenv.sh
<span class="c"># Choose “mesongxl_p241_32_kernel49” // 37</span>
<span class="nv">$ </span><span class="nb">ln</span> <span class="nt">-s</span> aml-4.9 kernel/aml-3.14
<span class="nv">$ </span><span class="nb">ln</span> <span class="nt">-s</span> aml-4.9 hardware/aml-3.14
<span class="nv">$ </span>make
</pre></td></tr></tbody></table></code></pre></figure>

<p>After the proccess in complete everything will be at output/mesongxl_p241_32_kernel49/images with folowing parts:</p>


        
            <p><a href="https://blog.degitx.com/general/amlogic_s805x_board.html" role="button">Read More</a></p>
        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=AmLogic s805x GXL SoC board bring up&p[summary]=One of the previous projects was related to bringing up our newly developed board with the AmLogic s805x SoC CPU board. I will describe h...&p[url]=https://blog.degitx.com/general/amlogic_s805x_board.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/amlogic_s805x_board.html&text=One of the previous projects was related to bringing up our newly developed board with the AmLogic s805x SoC CPU board. I will describe h...&hashtags=C,uboot,u-boot,kernel,linux,amlogic,s805x,s905x,board,bringup,dtb,embedded,gpio,DS1307,i2cdump,i2c,gstreamer,alsa,amlvdec,thermal_zone," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/uboot">uboot</a></li>
                
                <li><a href="https://blog.degitx.com/tag/u-boot">u-boot</a></li>
                
                <li><a href="https://blog.degitx.com/tag/kernel">kernel</a></li>
                
                <li><a href="https://blog.degitx.com/tag/linux">linux</a></li>
                
                <li><a href="https://blog.degitx.com/tag/amlogic">amlogic</a></li>
                
                <li><a href="https://blog.degitx.com/tag/s805x">s805x</a></li>
                
                <li><a href="https://blog.degitx.com/tag/s905x">s905x</a></li>
                
                <li><a href="https://blog.degitx.com/tag/board">board</a></li>
                
                <li><a href="https://blog.degitx.com/tag/bringup">bringup</a></li>
                
                <li><a href="https://blog.degitx.com/tag/dtb">dtb</a></li>
                
                <li><a href="https://blog.degitx.com/tag/embedded">embedded</a></li>
                
                <li><a href="https://blog.degitx.com/tag/gpio">gpio</a></li>
                
                <li><a href="https://blog.degitx.com/tag/DS1307">DS1307</a></li>
                
                <li><a href="https://blog.degitx.com/tag/i2cdump">i2cdump</a></li>
                
                <li><a href="https://blog.degitx.com/tag/i2c">i2c</a></li>
                
                <li><a href="https://blog.degitx.com/tag/gstreamer">gstreamer</a></li>
                
                <li><a href="https://blog.degitx.com/tag/alsa">alsa</a></li>
                
                <li><a href="https://blog.degitx.com/tag/amlvdec">amlvdec</a></li>
                
                <li><a href="https://blog.degitx.com/tag/thermal_zone">thermal_zone</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2022-09-08T00:05:00+00:00" itemprop="datePublished">8 Sep, 2022</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/c_include_android.html">C_INCLUDES must be under the source or output directories</a></h2>
    </header>

    <div class="post-content">
        <p>“C_INCLUDES must be under the source or output directories” error can indicate the the sources not included under LOCAL_C_INCLUDES</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre>LOCAL_C_INCLUDES +<span class="o">=</span> <span class="se">\</span>
    <span class="si">$(</span>LOCAL_PATH<span class="si">)</span> <span class="se">\</span>
    <span class="si">$(</span>LOCAL_PATH<span class="si">)</span>/src
</pre></td></tr></tbody></table></code></pre></figure>

<p>But at the same time be aware of symlinks! The problem can be if the folder created with symlinks! So aware of them.</p>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=C_INCLUDES must be under the source or output directories&p[summary]=“C_INCLUDES must be under the source or output directories” error can indicate the the sources not included under LOCAL_C_INCLUDES

1
2
3...&p[url]=https://blog.degitx.com/general/c_include_android.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/c_include_android.html&text=“C_INCLUDES must be under the source or output directories” error can indicate the the sources not included under LOCAL_C_INCLUDES

1
2
3...&hashtags=C,android,mk,makefile,module,nmake,ninja," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/android">android</a></li>
                
                <li><a href="https://blog.degitx.com/tag/mk">mk</a></li>
                
                <li><a href="https://blog.degitx.com/tag/makefile">makefile</a></li>
                
                <li><a href="https://blog.degitx.com/tag/module">module</a></li>
                
                <li><a href="https://blog.degitx.com/tag/nmake">nmake</a></li>
                
                <li><a href="https://blog.degitx.com/tag/ninja">ninja</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2022-07-30T00:05:00+00:00" itemprop="datePublished">30 Jul, 2022</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/mingw-full-static.html">Mingw full static linkage instead of binary</a></h2>
    </header>

    <div class="post-content">
        <p>How to avoid usage of libgcc_s_seh-1.dll or libgcc_s_dw2-1.dll ? You need to include following link flags:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nt">-static-libgcc</span> <span class="nt">-static-libstdc</span>++ <span class="nt">-static</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>In case of CMake:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">if</span><span class="o">(</span>MINGW<span class="o">)</span>
    SET<span class="o">(</span>CMAKE_EXE_LINKER_FLAGS  <span class="s2">"</span><span class="k">${</span><span class="nv">CMAKE_EXE_LINKER_FLAGS</span><span class="k">}</span><span class="s2"> -static-libgcc -static-libstdc++ -static"</span><span class="o">)</span>
endif<span class="o">()</span>
</pre></td></tr></tbody></table></code></pre></figure>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Mingw full static linkage instead of binary&p[summary]=How to avoid usage of libgcc_s_seh-1.dll or libgcc_s_dw2-1.dll ? You need to include following link flags:

1
-static-libgcc -static-libs...&p[url]=https://blog.degitx.com/general/mingw-full-static.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/mingw-full-static.html&text=How to avoid usage of libgcc_s_seh-1.dll or libgcc_s_dw2-1.dll ? You need to include following link flags:

1
-static-libgcc -static-libs...&hashtags=C++,C,mingw,arch,native,crossplatform,x64_86,x86,cmake,static,shared," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/mingw">mingw</a></li>
                
                <li><a href="https://blog.degitx.com/tag/arch">arch</a></li>
                
                <li><a href="https://blog.degitx.com/tag/native">native</a></li>
                
                <li><a href="https://blog.degitx.com/tag/crossplatform">crossplatform</a></li>
                
                <li><a href="https://blog.degitx.com/tag/x64_86">x64_86</a></li>
                
                <li><a href="https://blog.degitx.com/tag/x86">x86</a></li>
                
                <li><a href="https://blog.degitx.com/tag/cmake">cmake</a></li>
                
                <li><a href="https://blog.degitx.com/tag/static">static</a></li>
                
                <li><a href="https://blog.degitx.com/tag/shared">shared</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2022-07-22T23:32:00+00:00" itemprop="datePublished">22 Jul, 2022</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/crossplatform-arch-detection.html">Crossplatform C++ Arch detection</a></h2>
    </header>

    <div class="post-content">
        <p>You can simply get current arch usign following code, where on windows can be used GetNativeSystemInfo() and on macos and linux uname() function:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="nf">GetOSArch</span><span class="p">()</span>
<span class="p">{</span>
<span class="cp">#ifdef CPK_OS_WIN
</span>    <span class="n">SYSTEM_INFO</span> <span class="n">info</span><span class="p">;</span>
    <span class="n">GetNativeSystemInfo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">info</span><span class="p">);</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">wProcessorArchitecture</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">PROCESSOR_ARCHITECTURE_AMD64</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"x86_64"</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">PROCESSOR_ARCHITECTURE_INTEL</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"x86"</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">PROCESSOR_ARCHITECTURE_IA64</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"ia64"</span><span class="p">;</span>
    <span class="p">};</span>
<span class="cp">#endif
#if defined(CPK_OS_LINUX) || defined(CPK_OS_MACOS)
</span>    <span class="kt">long</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">struct</span> <span class="nc">utsname</span> <span class="n">u</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">uname</span><span class="p">(</span><span class="o">&amp;</span><span class="n">u</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'i'</span>
                <span class="o">&amp;&amp;</span> <span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'8'</span> <span class="o">&amp;&amp;</span> <span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'6'</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"x86"</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">,</span> <span class="s">"amd64"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// Solaris</span>
            <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"x86_64"</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">machine</span><span class="p">);</span>
    <span class="p">}</span>
<span class="cp">#endif
</span>    <span class="k">return</span> <span class="s">""</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>OS detection can be done for example on cmake side or with other definition like <code class="language-plaintext highlighter-rouge">__WIN32</code>:</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="nb">if</span><span class="p">(</span>WIN32<span class="p">)</span>
    <span class="nb">add_definitions</span><span class="p">(</span>-DCPK_OS_WIN<span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
    <span class="nb">if</span> <span class="p">(</span><span class="si">${</span><span class="nv">CMAKE_SYSTEM_NAME</span><span class="si">}</span> MATCHES <span class="s2">"Darwin"</span><span class="p">)</span>
        <span class="nb">add_definitions</span><span class="p">(</span>-DCPK_OS_MACOS<span class="p">)</span>
    <span class="nb">else</span><span class="p">()</span>
        <span class="nb">add_definitions</span><span class="p">(</span>-DCPK_OS_LINUX<span class="p">)</span>
    <span class="nb">endif</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></figure>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Crossplatform C++ Arch detection&p[summary]=You can simply get current arch usign following code, where on windows can be used GetNativeSystemInfo() and on macos and linux uname() f...&p[url]=https://blog.degitx.com/general/crossplatform-arch-detection.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/crossplatform-arch-detection.html&text=You can simply get current arch usign following code, where on windows can be used GetNativeSystemInfo() and on macos and linux uname() f...&hashtags=C++,C,mingw,arch,native,crossplatform,x64_86,x86,linux,macos,windows,cmake," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/mingw">mingw</a></li>
                
                <li><a href="https://blog.degitx.com/tag/arch">arch</a></li>
                
                <li><a href="https://blog.degitx.com/tag/native">native</a></li>
                
                <li><a href="https://blog.degitx.com/tag/crossplatform">crossplatform</a></li>
                
                <li><a href="https://blog.degitx.com/tag/x64_86">x64_86</a></li>
                
                <li><a href="https://blog.degitx.com/tag/x86">x86</a></li>
                
                <li><a href="https://blog.degitx.com/tag/linux">linux</a></li>
                
                <li><a href="https://blog.degitx.com/tag/macos">macos</a></li>
                
                <li><a href="https://blog.degitx.com/tag/windows">windows</a></li>
                
                <li><a href="https://blog.degitx.com/tag/cmake">cmake</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2022-05-27T23:32:00+00:00" itemprop="datePublished">27 May, 2022</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/glibc-mingw-missmatch.html">Missmatch of libstd++ library / _zst28__throw_bad_array_new_lengthv error</a></h2>
    </header>

    <div class="post-content">
        <p>For example you install new compiler or MinGW C++ and you met error of _zst28__throw_bad_array_new_lengthv after compile time. You can verify you compiler with simple example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span> <span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span> <span class="c1">// problem line</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"hellow world"</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>If you still get error on such simple example you have system libstd++ missmatch. Your system is taking this library from some other part of the system (NOT from compiler directory) of the %PATH% location. Edit you PATH variable and make compiler directory (for example: c:\mingw64\bin) to be ABOVE the problematic one. Or with other words: compiler directory must have more priority. Very popular problematic place is git - C:\Git\mingw64\bin, move it to the end of %PATH%.</p>

<p>The error must go away.</p>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Missmatch of libstd++ library / _zst28__throw_bad_array_new_lengthv error&p[summary]=For example you install new compiler or MinGW C++ and you met error of _zst28__throw_bad_array_new_lengthv after compile time. You can ve...&p[url]=https://blog.degitx.com/general/glibc-mingw-missmatch.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/glibc-mingw-missmatch.html&text=For example you install new compiler or MinGW C++ and you met error of _zst28__throw_bad_array_new_lengthv after compile time. You can ve...&hashtags=C++,C,mingw,error,windows," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/mingw">mingw</a></li>
                
                <li><a href="https://blog.degitx.com/tag/error">error</a></li>
                
                <li><a href="https://blog.degitx.com/tag/windows">windows</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2020-10-22T23:32:00+00:00" itemprop="datePublished">22 Oct, 2020</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/gstreamer-h264-capture.html">GStreamer H264/MP4 decoding C/C++ basics and encoding/decoding buffers manipulations</a></h2>
    </header>

    <div class="post-content">
        <h3 id="exploring-gstreamer-and-pipelines">Exploring GStreamer and pipelines</h3>

<p>Before proceeding to code review, let’s look at what we can do without it.  GStreamer includes useful utilities to work with, in particular:</p>

<ul>
  <li>gst-inspect-1.0 will allow you to see a list of available codecs and modules, so you can immediately see what will do with it and select a set of filters and codecs.</li>
  <li>gst-launch-1.0 allows you to start any pipeline.
GStreamer uses a decoding scheme where a stream passes through different components in series, from source to sink output. You can choose anything as a source: a file, a device, the output (sink) also may be a file, a screen, network outputs, and protocols (like RTP).</li>
</ul>

<p>Simple example of using gst-launch-1.0 to connect elements and play audio:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre>gst-launch-1.0 filesrc <span class="nv">location</span><span class="o">=</span>/path/to/file.ogg <span class="o">!</span> decodebin <span class="o">!</span> alsasink
</pre></td></tr></tbody></table></code></pre></figure>

<figure>
  <img src="/images/gstreamer/sinksrc.png" />
  <figcaption>How to sink and src works</figcaption>
</figure>

<p>Filesrc will open file, decodebin - decode it, and alsasink will output audio.</p>

<p>Another more complex example of playing an mp4 file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre>gst-launch-1.0 filesrc <span class="nv">location</span><span class="o">=</span>file.mp4 <span class="o">!</span> qtdemux <span class="o">!</span> h264parse <span class="o">!</span> avdec_h264 <span class="o">!</span> videoconvert <span class="o">!</span> autovideosink
</pre></td></tr></tbody></table></code></pre></figure>

<p>The input accepts the mp4 file, which goes through the mp4 demuxer — qtdemux, then through the h264 parser, then through the decoder, the converter, and finally, the output.</p>

<p>You can replace autovideosink with filesink with a file parameter and output the decoded stream directly to the file.</p>

<h3 id="programming-an-application-with-gstreamer-cc-api-lets-try-to-decode">Programming an application with GStreamer C/C++ API. Let’s try to decode</h3>

<p>Now when we know how to use gst-launch-1.0, we are doing the same thing within our application. The principle remains the same: we are building in a decoding pipeline, but now we are using the GStreamer library and glib-events.</p>

<p>We will consider a live example of H264 decoding.</p>

<p>Initialization of the GStreamer application takes place once with the help of</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="n">gst_init</span> <span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></figure>



        
            <p><a href="https://blog.degitx.com/general/gstreamer-h264-capture.html" role="button">Read More</a></p>
        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=GStreamer H264/MP4 decoding C/C++ basics and encoding/decoding buffers manipulations&p[summary]=Exploring GStreamer and pipelines

Before proceeding to code review, let’s look at what we can do without it.  GStreamer includes useful ...&p[url]=https://blog.degitx.com/general/gstreamer-h264-capture.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/gstreamer-h264-capture.html&text=Exploring GStreamer and pipelines

Before proceeding to code review, let’s look at what we can do without it.  GStreamer includes useful ...&hashtags=gstreamer,C++,native,aac,streaming,video capture," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/gstreamer">gstreamer</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/native">native</a></li>
                
                <li><a href="https://blog.degitx.com/tag/aac">aac</a></li>
                
                <li><a href="https://blog.degitx.com/tag/streaming">streaming</a></li>
                
                <li><a href="https://blog.degitx.com/tag/video capture">video capture</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2020-07-15T23:32:00+00:00" itemprop="datePublished">15 Jul, 2020</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/android-ndk-aac.html">Android NDK AAC decoder ADTS alignment</a></h2>
    </header>

    <div class="post-content">
        <p>After a long thought, I finally decided to switch my blog articles to english, and continue to give some rare and mostly unintresting info in free form. And today we will talk more about Android, NDK and some undocumentated video/audio functionality, maybe will discover some new knowlage about AAC and maybe it will help your own problem, like it was for me.
In a focus of this acrticle is Android AAC decoder, and a little detail how the decoding in android working behind NDK documentation.</p>

<h3 id="amediacodec-using-steps">AMediaCodec using steps</h3>

<p>First let take a very very surface look how to start decoding using NDK:</p>
<ol>
  <li>Create AMediaCodec using codec name.</li>
  <li>Configure AMediaCodec via AMediaCodec_configure.</li>
  <li>Ctart decoding AMediaCodec_start.</li>
  <li>Give a buffer using AMediaCodec_getInputBuffer.</li>
  <li>Back buffer with AMediaCodec_queueInputBuffer.</li>
  <li>Repeat while you have an buffer ;).</li>
</ol>

<p>Looks very simple, and work good as well. I can end this article in this place, but I don’t tell you nothing about buffer requirenments and other stuffs, and in NDK/SDK also all simple like that. So what going on behind this android decoding? What if you getting some error with your buffer, or you don’t have sound in some rare cases? How the Android decoder works like, let take a look at AAC audio decoder as example. Let’s begin from simple.</p>

<figure>
	<img src="/images/ndk-acc/download.jpg" />
	<figcaption>Android AAC decoder architecture</figcaption>
</figure>

<p>As you see on this bad jpeg picture :) Android have different implementation of AAC decoders as OMX components. But that’s not all, beside some software implemetation on some platforms existed hardware implementation, like on Broadcom chips. Keep at mind, and will transport to SoftAAC2 decoder. Let take a look deeper.</p>



        
            <p><a href="https://blog.degitx.com/general/android-ndk-aac.html" role="button">Read More</a></p>
        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Android NDK AAC decoder ADTS alignment&p[summary]=After a long thought, I finally decided to switch my blog articles to english, and continue to give some rare and mostly unintresting inf...&p[url]=https://blog.degitx.com/general/android-ndk-aac.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/android-ndk-aac.html&text=After a long thought, I finally decided to switch my blog articles to english, and continue to give some rare and mostly unintresting inf...&hashtags=android,sdk,ndk,C++,aac,algorithm," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/android">android</a></li>
                
                <li><a href="https://blog.degitx.com/tag/sdk">sdk</a></li>
                
                <li><a href="https://blog.degitx.com/tag/ndk">ndk</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/aac">aac</a></li>
                
                <li><a href="https://blog.degitx.com/tag/algorithm">algorithm</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2018-02-03T23:32:00+00:00" itemprop="datePublished">3 Feb, 2018</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/c-ctrlc.html">Send Ctrl+C event to any Windows window</a></h2>
    </header>

    <div class="post-content">
        <p>In some cases you want close the window on windows with ctrl+c combination, or invoke event for different reasons. On windows you can make such small program:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre><span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
 <span class="kt">int</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
 <span class="n">printf</span><span class="p">(</span><span class="s">"kill in console %d"</span><span class="p">,</span> <span class="n">pid</span><span class="p">);</span>

 <span class="n">FreeConsole</span><span class="p">();</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">AttachConsole</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
 <span class="p">{</span>
     <span class="n">SetConsoleCtrlHandler</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
     <span class="n">GenerateConsoleCtrlEvent</span><span class="p">(</span><span class="n">CTRL_C_EVENT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
     <span class="n">FreeConsole</span><span class="p">();</span>
     <span class="n">SetConsoleCtrlHandler</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
 <span class="p">}</span>


 <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>As argument you can pass a pid or the window proccess. (You can get it via system monitor).</p>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Send Ctrl+C event to any Windows window&p[summary]=In some cases you want close the window on windows with ctrl+c combination, or invoke event for different reasons. On windows you can mak...&p[url]=https://blog.degitx.com/general/c-ctrlc.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/c-ctrlc.html&text=In some cases you want close the window on windows with ctrl+c combination, or invoke event for different reasons. On windows you can mak...&hashtags=C,C++,WinAPI,Windows,PID,keyboard,keys,event," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/C">C</a></li>
                
                <li><a href="https://blog.degitx.com/tag/C++">C++</a></li>
                
                <li><a href="https://blog.degitx.com/tag/WinAPI">WinAPI</a></li>
                
                <li><a href="https://blog.degitx.com/tag/Windows">Windows</a></li>
                
                <li><a href="https://blog.degitx.com/tag/PID">PID</a></li>
                
                <li><a href="https://blog.degitx.com/tag/keyboard">keyboard</a></li>
                
                <li><a href="https://blog.degitx.com/tag/keys">keys</a></li>
                
                <li><a href="https://blog.degitx.com/tag/event">event</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2018-01-31T23:32:00+00:00" itemprop="datePublished">31 Jan, 2018</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/general/">general</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://blog.degitx.com/general/electron-ipc.html">Electron IPC communication. Render and main threads</a></h2>
    </header>

    <div class="post-content">
        <p>What I often dislike about the standard documentation for many things is that seemingly identical items are separated by a huge layer of unnecessary information, or are generally so poorly documented that it’s faster to find the answer on Stack Overflow. So, if we know what Electron is, and roughly imagine that it consists of a main process controlled by node-js and a browser process (the so-called render process), how do we organize communication between 2 processes?</p>

<h3 id="main-process-communication---render-process-from-main-to-render">Main process communication -&gt; Render process (from main to render)</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="c1">// main.process.js - send</span>
<span class="c1">// mainWindow - this is BrowserWindow</span>
<span class="nx">mainWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="c1">// отправка</span>

<span class="c1">// render.process.js - recive</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ipcRenderer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">electron</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="c1">// handle</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h3 id="communication-between-render-process---main-process-from-render-to-main">Communication between Render process -&gt; Main process (from render to main)</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="c1">// main.process.js - recive</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ipcMain</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">electron</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="c1">// handle</span>
<span class="p">})</span>

<span class="c1">// render.process.js - send</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ipcRenderer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">electron</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h3 id="global-object">global object</h3>

<p>Why it was so difficult to collect this information in one place I don’t understand at all.
There is also a useful shared global object that is available inside the renderer and is declared in the main process.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="c1">// main.process.js</span>
<span class="nb">global</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">// render.process.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">remote</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">electron</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">remote</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// 1</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Maybe someone will find this information useful</p>


        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Electron IPC communication. Render and main threads&p[summary]=What I often dislike about the standard documentation for many things is that seemingly identical items are separated by a huge layer of ...&p[url]=https://blog.degitx.com/general/electron-ipc.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://blog.degitx.com/general/electron-ipc.html&text=What I often dislike about the standard documentation for many things is that seemingly identical items are separated by a huge layer of ...&hashtags=JS,Javascript,Electron,IPC,send,recive," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://blog.degitx.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://blog.degitx.com/tag/JS">JS</a></li>
                
                <li><a href="https://blog.degitx.com/tag/Javascript">Javascript</a></li>
                
                <li><a href="https://blog.degitx.com/tag/Electron">Electron</a></li>
                
                <li><a href="https://blog.degitx.com/tag/IPC">IPC</a></li>
                
                <li><a href="https://blog.degitx.com/tag/send">send</a></li>
                
                <li><a href="https://blog.degitx.com/tag/recive">recive</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>




<div class="pagination next" role="navigation" aria-label="pagination">
    

    <span class="page_number">Page 1 of 2</span>

    
        <a href="/page2/" class="next">Next &rarr;</a>
    
</div>

            </main>
        </div>
    </body>
</html>